---
title: "Exercise 1"
output: html_document
date: "2024-02-08"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}

#Web Scraping for amazon
library(rvest)
library(dplyr)
library(polite)
library(stringr)

url <- "https://www.amazon.com/s?k=gaming+hats&_encoding=UTF8&content-id=amzn1.sym.09483392-9ac6-434a-a3d7-39d83662f54a&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=OBZiU&pd_rd_wg=PaoPW&pf_rd_p=09483392-9ac6-434a-a3d7-39d83662f54a&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk"

session <- bow(url, user_agent = "Educational Purposes")
session
```


```{r}
library(rvest)
library(stringr)

#url 
session <- html_session("https://www.amazon.com/s?k=gaming+hats&_encoding=UTF8&content-id=amzn1.sym.09483392-9ac6-434a-a3d7-39d83662f54a&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=OBZiU&pd_rd_wg=PaoPW&pf_rd_p=09483392-9ac6-434a-a3d7-39d83662f54a&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk")

name <- session %>%
  html_nodes("h2") %>%
  html_text()

one<- name[1:50]
one

price <- session %>%
  html_nodes("span.a-price") %>%
  html_text()


first_price <- str_extract(price[1:50], "\\$[0-9.]+")
# Print or use the first price
print(first_price)


rating <- session %>%
  html_nodes("span.a-size-base.s-underline-text") %>%
  html_text()

three<- rating[1:50]
three

review <- session %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

four<- review[1:50]
four

frame1 <- data.frame(
  Name = one, 
  Price = first_price, 
  Rating = three, 
  Reviews = four
)
frame1
```


```{r}
url2 <- "https://www.amazon.com/s?k=video+gaming&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk"

session2 <- bow(url2, user_agent = "Educational Purposes")
session2

```
```{r}
library(rvest)
library(stringr)

#url
session2 <- html_session("https://www.amazon.com/s?k=video+gaming&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk")

# 
name2 <- session2 %>%
  html_nodes("h2") %>%
  html_text()

one2<- name2[1:48]
one2

price2 <- session2 %>%
  html_nodes("span.a-price") %>%
  html_text()


first_price2 <- str_extract(price2[1:48], "\\$[0-9.]+")

# 
print(first_price2)


rating2 <- session2 %>%
  html_nodes("span.a-size-base.s-underline-text") %>%
  html_text()

three2<- rating2[1:48]
three2

review2 <- session2 %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

four2<- review2[1:48]
four2

frame2 <- data.frame(
  Name = one2, 
  Price = first_price2, 
  Rating = three2, 
  Reviews = four2
)
frame2
```



```{r}
url3 <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

session3 <- bow(url3, user_agent = "Educational Purposes")
session3

```

```{r}
library(rvest)
library(stringr)


session3 <- html_session("https://www.amazon.com/s?k=video+gaming&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk")

name3 <- session3 %>%
  html_nodes("h2") %>%
  html_text()

one3<- name3[1:2]
one3

price3 <- session3 %>%
  html_nodes("span.a-price") %>%
  html_text()

# 
first_price3 <- str_extract(price3[1:2], "\\$[0-9.]+")

# 
print(first_price3)


rating3 <- session3 %>%
  html_nodes("span.a-size-base.s-underline-text") %>%
  html_text()

three3<- rating3[1:2]
three3

review3 <- session3 %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

four3<- review3[1:2]
four3

frame3 <- data.frame(
  Name = one3, 
  Price = first_price3, 
  Rating = three3, 
  Reviews = four3
)
frame3
```

```{r}
combined_df <- rbind(frame1, frame2, frame3)
print(combined_df)
```


Get the 25 Reviews each for 10 product. 

```{r}
#product1 
library(rvest)
library(dplyr)
library(polite)
library(stringr)

urlone <- "https://www.amazon.com/product-reviews/B0CCP6HLZR/ref=acr_dpx_hist_5?ie=UTF8&filterByStar=five_star&reviewerType=all_reviews#reviews-filter-bar"

sessionone <- bow(urlone, user_agent = "Educational Purposes")
sessionone
```


```{r}
library(rvest)
library(stringr)

sessionone <- html_session("https://www.amazon.com/product-reviews/B0CCP6HLZR/ref=acr_dpx_hist_5?ie=UTF8&filterByStar=five_star&reviewerType=all_reviews#reviews-filter-bar")

#name of reviewr
namerev <- sessionone %>%
  html_nodes("span.a-profile-name") %>%
  html_text()

namer<- namerev[1:25]
namer

#date of review
date <- sessionone %>%
  html_nodes("span.review-date") %>%
  html_text()

daterev<- date[1:25]
daterev


#individual rating
rateindi <- sessionone %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

indi<- rateindi[1:25]
indi

#Review comment 
revcom <- sessionone %>%
  html_nodes("span.a-size-base review-text review-text-content") %>%
  html_text()

revi<- revcom[1:25]
revi

framea <- data.frame(
  Name = namer, 
  Date = daterev, 
  IndividualRating = indi, 
  Review = revi
)
framea
```

```{r}
url2 <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

session2 <- bow(url2, user_agent = "Educational Purposes")
session2
```

```{r}
url3 <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

session3 <- bow(url3, user_agent = "Educational Purposes")
session3
```

```{r}
url4 <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

session4 <- bow(url4, user_agent = "Educational Purposes")
session4
```

```{r}
url5 <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

session5 <- bow(url5, user_agent = "Educational Purposes")
session5
```


```{r}
url3 <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

session6 <- bow(url6, user_agent = "Educational Purposes")
session6
```


```{r}
url7 <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

session7 <- bow(url7, user_agent = "Educational Purposes")
session7
```

```{r}
url3 <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

session8 <- bow(url8, user_agent = "Educational Purposes")
session8
```

```{r}
url9 <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

session9 <- bow(url9, user_agent = "Educational Purposes")
session9
```

```{r}
url10 <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

session10 <- bow(url10, user_agent = "Educational Purposes")
session10
```



