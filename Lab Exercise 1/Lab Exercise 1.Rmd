---
title: "Reysha Marie S. Salinas IT2C  LAB Exercise 1"
output:
  html_document: default
date: "2024-02-08"
---


```{r}

#Web Scraping for amazon
library(rvest)
library(dplyr)
library(polite)
library(stringr) 
library(httr)

url <- "https://www.amazon.com/s?k=gaming+hats&_encoding=UTF8&content-id=amzn1.sym.09483392-9ac6-434a-a3d7-39d83662f54a&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=OBZiU&pd_rd_wg=PaoPW&pf_rd_p=09483392-9ac6-434a-a3d7-39d83662f54a&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk"

session <- bow(url, user_agent = "Educational Purposes")
session
```


```{r}
library(rvest)
library(stringr)
library(httr2) 
library(dplyr)


          session1 <- session("https://www.amazon.com/s?k=gaming+hats&_encoding=UTF8&content-id=amzn1.sym.09483392-9ac6-434a-a3d7-39d83662f54a&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=OBZiU&pd_rd_wg=PaoPW&pf_rd_p=09483392-9ac6-434a-a3d7-39d83662f54a&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk")
```


```{r}
name <- session1 %>%
  html_nodes("h2") %>%
  html_text()

one<- name[1:50]
one

price <- session1 %>%
  html_nodes("span.a-price") %>%
  html_text()


first_price <- str_extract(price[1:50], "\\$[0-9.]+")
# Print or use the first price
print(first_price)


rating <- session1 %>%
  html_nodes("span.a-size-base.s-underline-text") %>%
  html_text()

three<- rating[1:50]
three

review <- session1 %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

four<- review[1:50]
four
```


```{r}
frame1 <- data.frame(
  Name = one, 
  Price = first_price, 
  Rating = three, 
  Reviews = four
)
frame1
```


```{r}
url2 <- "https://www.amazon.com/s?k=video+gaming&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk"

session2 <- bow(url2, user_agent = "Educational Purposes")
session2


```


```{r}
library(rvest)
library(stringr) 
library(httr2)


session2 <- session("https://www.amazon.com/s?k=video+gaming&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk") 

```


```{r}

name2 <- session2 %>%
  html_nodes("h2") %>%
  html_text()

one2<- name2[1:48]
one2

price2 <- session2 %>%
  html_nodes("span.a-price") %>%
  html_text()


first_price2 <- str_extract(price2[1:48], "\\$[0-9.]+")

# 
print(first_price2)


rating2 <- session2 %>%
  html_nodes("span.a-size-base.s-underline-text") %>%
  html_text()

three2<- rating2[1:48]
three2

review2 <- session2 %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

four2<- review2[1:48]
four2

frame2 <- data.frame(
  Name = one2, 
  Price = first_price2, 
  Rating = three2, 
  Reviews = four2
)
frame2
```



```{r}
url3 <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

session3 <- bow(url3, user_agent = "Educational Purposes")
session3


library(rvest)
library(stringr)
library(httr2)
library(httr) 


session3 <- session("https://www.amazon.com/s?k=video+gaming&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk")

```


```{r}
name3 <- session3 %>%
  html_nodes("h2") %>%
  html_text()

one3<- name3[1:2]
one3

price3 <- session3 %>%
  html_nodes("span.a-price") %>%
  html_text()

# 
first_price3 <- str_extract(price3[1:2], "\\$[0-9.]+")

# 
print(first_price3)


rating3 <- session3 %>%
  html_nodes("span.a-size-base.s-underline-text") %>%
  html_text()

three3<- rating3[1:2]
three3

review3 <- session3 %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

four3<- review3[1:2]
four3

frame3 <- data.frame(
  Name = one3, 
  Price = first_price3, 
  Rating = three3, 
  Reviews = four3
)
frame3
```

```{r}
products12<- bind_rows(frame1, frame2, frame3)
products12
```

```{r}
write.csv(products12,file = "ProductsReview100.csv")
```





Get the 25 Reviews each for 10 product. 
FIRST PRODUCT
```{r}
#product1 

urle <- "https://www.amazon.com/s?k=video+gaming&page=2&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&qid=1707404161&ref=sr_pg_1"

sessiont <- bow(urle, user_agent = "Educational Purposes")
sessiont


library(rvest)
library(stringr)
library(httr2)
library(httr) 


sessiont <- session("https://www.amazon.com/s?k=video+gaming&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk")

#name of reviewr

namerev <- sessiont %>%
  html_nodes("span.a-profile-name") %>%
  html_text()

namer<- namerev[1:25]
namer

#date of review
date <- sessiont %>%
  html_nodes("span.review-date") %>%
  html_text()
date
daterev <- date[1:25]
daterev


#individual rating
rateindi <- sessiont %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

indi<- rateindi[1:25]
indi


#Review comment 
revcom <- sessiont %>%
  html_nodes("span.a-size-base.review-text.review-text-content") %>%
  html_text()

revi<- revcom[1:25]
revi <- gsub("\n", "", revi)
revi

framet1 <- data.frame(
  Name = namer, 
  Date = daterev, 
  IndividualRating = indi, 
  Review = revi
)
framet1

write.csv(framet1, file = "PRODUCT1.csv")
```
SECOND--------------------------
```{r}
#product1 

urlA <- "https://www.amazon.com/Kasa-Smart-Security-Detection-KC410S/dp/B08ZXJJTYJ/ref=pd_bxgy_img_d_sccl_1/147-1768349-8840755?pd_rd_w=ARzFU&content-id=amzn1.sym.2b132e63-5dcd-4ba1-be9f-9e044543d59f&pf_rd_p=2b132e63-5dcd-4ba1-be9f-9e044543d59f&pf_rd_r=40XCD9QEVQ2J7CCJ61KG&pd_rd_wg=Rim0n&pd_rd_r=0f2d8bce-8434-4f79-ba3d-7b4fa09d3006&pd_rd_i=B08ZXJJTYJ&th=1"

sessionA <- bow(urlA, user_agent = "Educational Purposes")
sessionA


library(rvest)
library(stringr)
library(httr2)
library(httr) 


sessiont <- session("https://www.amazon.com/s?k=video+gaming&_encoding=UTF8&content-id=amzn1.sym.4b335ede-a344-46a5-af28-95a1242a7034&pd_rd_r=d6faa99d-7b4f-4f66-ba1b-51efdc7ad720&pd_rd_w=ZXfjw&pd_rd_wg=PaoPW&pf_rd_p=4b335ede-a344-46a5-af28-95a1242a7034&pf_rd_r=Y73JSEQDQKY4X4KXWZNR&ref=pd_gw_unk")

#name of reviewr

namerevA <- sessiontA %>%
  html_nodes("span.a-profile-name") %>%
  html_text()

namerA<- namerevA[1:25]
namerA

#date of review
dateA <- sessiontA %>%
  html_nodes("span.review-date") %>%
  html_text()
dateA
daterevA <- date[1:25]
daterevA


#individual rating
rateindiA <- sessiontA %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

indiA<- rateindiA[1:25]
indiA


#Review comment 
revcomA <- sessiontA %>%
  html_nodes("span.a-size-base.review-text.review-text-content") %>%
  html_text()

revi<- revcom[1:25]
revi <- gsub("\n", "", revi)
revi

framet1 <- data.frame(
  Name = namer, 
  Date = daterev, 
  IndividualRating = indi, 
  Review = revi
)
framet1

write.csv(framet1, file = "PRODUCT2.csv")
```

```{r}
write.csv(products, file = "ProductReviews.csv")
```

